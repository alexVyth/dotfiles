#! /bin/zsh

bspc rule -r "*"
bspc rule -a Chromium desktop='^2' follow=off
bspc rule -a firefox desktop='^2' follow=off
bspc rule -a qutebrowser desktop='^2' follow=off

bspc rule -a Signal desktop='^3' follow=off state=tiled
bspc rule -a ViberPC desktop='^3' focus=off follow=off

bspc rule -a qBittorrent desktop='^4' follow=on
bspc rule -a Thunar desktop='^4' follow=on
bspc rule -a libreoffice-startcenter desktop='^4' follow=on

bspc rule -a Lutris desktop='^5' follow=on
bspc rule -a Zathura state=tiled

mainmonitor="$(bspc query --monitors --names | grep -v LVDS | head -n 1)"

if ! echo "$mainmonitor" | grep LVDS >/dev/null 2>&1; then
	xrandr --output "$mainmonitor" --auto --output LVDS1 --off
fi

$HOME/.config/polybar/launch.sh &
feh --bg-scale $HOME/.wp.jpg &
killall picom
picom &
if ! pgrep -u $UID -x dunst >/dev/null; then
	sxhkd &
	setxkbmap us,gr -option 'grp:caps_toggle' &
	$HOME/.toggle_touchpad.sh &
	chromium &
	alacritty &
	alacritty &
	signal-desktop &
	i3-battery-popup -n &
	xsetroot -cursor_name left_ptr &
	mopidy &
fi
dunst &

bspc monitor $mainmonitor -d I II III IV V VI VII VIII IX X

bspc config ignore_ewmh_focus true
#bspc config ignore_ewmh_fullscreen all

bspc config border_width         4
bspc config window_gap          15

bspc config split_ratio          0.5
bspc config borderless_monocle   true
bspc config gapless_monocle      true

bspc config normal_border_color   \#002b36
bspc config focused_border_color  \#d81b60
bspc config presel_feedback_color \#002b36
